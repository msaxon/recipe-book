import{S as pe,F as Me,N as M,t as me,U as Oe,a as he,v as We,b as Fe,d as ze,c as Le,e as Z,R as He,P as Ke,f as je,g as J,T as L,r as Ve,n as ge,h as Be,i as Ge,j as Qe,k as fe,E as qe,l as Xe,m as Ze,o as Je,p as Ye,q as et,A as tt,s as st,u as it,w as rt,x as ot,D as nt,y as at,z as ct,B as ut,C as lt,G as dt,H as pt,I as mt,J as ht,K as gt,L as ft,M as St,O as yt,Q as Et,V as wt,W as Pt,X as bt,Y as At,Z as xt,_ as It,$ as Rt,a0 as Ct,a1 as Tt,a2 as Dt,a3 as kt,a4 as vt,a5 as _t,a6 as Nt,a7 as $t,a8 as Ut,a9 as Mt,aa as Ot,ab as Wt,ac as Y}from"./index-BYqFRQb6.js";class Ft{async sign(e,t,i){return e}}const Se=s=>{const e="#text";for(const t in s)s.hasOwnProperty(t)&&s[t][e]!==void 0?s[t]=s[t][e]:typeof s[t]=="object"&&s[t]!==null&&(s[t]=Se(s[t]));return s};let W;function zt(s){W||(W=new DOMParser);const e=W.parseFromString(s,"application/xml");if(e.getElementsByTagName("parsererror").length>0)throw new Error("DOMParser XML parsing error.");const t=i=>{if(i.nodeType===Node.TEXT_NODE&&i.textContent?.trim())return i.textContent;if(i.nodeType===Node.ELEMENT_NODE){const r=i;if(r.attributes.length===0&&r.childNodes.length===0)return"";const o={},a=Array.from(r.attributes);for(const c of a)o[`${c.name}`]=c.value;const n=Array.from(r.childNodes);for(const c of n){const u=t(c);if(u!=null){const d=c.nodeName;if(n.length===1&&a.length===0&&d==="#text")return u;o[d]?Array.isArray(o[d])?o[d].push(u):o[d]=[o[d],u]:o[d]=u}else if(n.length===1&&a.length===0)return r.textContent}return o}return null};return{[e.documentElement.nodeName]:t(e.documentElement)}}class Lt extends pe{settings;stringDeserializer;constructor(e){super(),this.settings=e,this.stringDeserializer=new Me(e)}setSerdeContext(e){this.serdeContext=e,this.stringDeserializer.setSerdeContext(e)}read(e,t,i){const r=M.of(e),o=r.getMemberSchemas();if(r.isStructSchema()&&r.isMemberSchema()&&!!Object.values(o).find(u=>!!u.getMemberTraits().eventPayload)){const u={},d=Object.keys(o)[0];return o[d].isBlobSchema()?u[d]=t:u[d]=this.read(o[d],t),u}const n=(this.serdeContext?.utf8Encoder??me)(t),c=this.parseXml(n);return this.readSchema(e,i?c[i]:c)}readSchema(e,t){const i=M.of(e);if(i.isUnitSchema())return;const r=i.getMergedTraits();if(i.isListSchema()&&!Array.isArray(t))return this.readSchema(i,[t]);if(t==null)return t;if(typeof t=="object"){const o=!!r.sparse,a=!!r.xmlFlattened;if(i.isListSchema()){const c=i.getValueSchema(),u=[],d=c.getMergedTraits().xmlName??"member",h=a?t:(t[0]??t)[d],w=Array.isArray(h)?h:[h];for(const P of w)(P!=null||o)&&u.push(this.readSchema(c,P));return u}const n={};if(i.isMapSchema()){const c=i.getKeySchema(),u=i.getValueSchema();let d;a?d=Array.isArray(t)?t:[t]:d=Array.isArray(t.entry)?t.entry:[t.entry];const h=c.getMergedTraits().xmlName??"key",w=u.getMergedTraits().xmlName??"value";for(const P of d){const R=P[h],A=P[w];(A!=null||o)&&(n[R]=this.readSchema(u,A))}return n}if(i.isStructSchema()){const c=i.isUnionSchema();let u;c&&(u=new Oe(t,n));for(const[d,h]of i.structIterator()){const w=h.getMergedTraits(),P=w.httpPayload?w.xmlName??h.getName():h.getMemberTraits().xmlName??d;c&&u.mark(P),t[P]!=null&&(n[d]=this.readSchema(h,t[P]))}return c&&u.writeUnknown(),n}if(i.isDocumentSchema())return t;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${i.getName(!0)}`)}return i.isListSchema()?[]:i.isMapSchema()||i.isStructSchema()?{}:this.stringDeserializer.read(i,t)}parseXml(e){if(e.length){let t;try{t=zt(e)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:e}),a}const i="#text",r=Object.keys(t)[0],o=t[r];return o[i]&&(o[r]=o[i],delete o[i]),Se(o)}return{}}}class Ht extends pe{settings;buffer;constructor(e){super(),this.settings=e}write(e,t,i=""){this.buffer===void 0&&(this.buffer="");const r=M.of(e);if(i&&!i.endsWith(".")&&(i+="."),r.isBlobSchema())(typeof t=="string"||t instanceof Uint8Array)&&(this.writeKey(i),this.writeValue((this.serdeContext?.base64Encoder??he)(t)));else if(r.isBooleanSchema()||r.isNumericSchema()||r.isStringSchema())t!=null?(this.writeKey(i),this.writeValue(String(t))):r.isIdempotencyToken()&&(this.writeKey(i),this.writeValue(We()));else if(r.isBigIntegerSchema())t!=null&&(this.writeKey(i),this.writeValue(String(t)));else if(r.isBigDecimalSchema())t!=null&&(this.writeKey(i),this.writeValue(t instanceof Fe?t.string:String(t)));else if(r.isTimestampSchema()){if(t instanceof Date)switch(this.writeKey(i),ze(r,this.settings)){case 5:this.writeValue(t.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue(Le(t));break;case 7:this.writeValue(String(t.getTime()/1e3));break}}else if(r.isDocumentSchema())Array.isArray(t)?this.write(79,t,i):t instanceof Date?this.write(4,t,i):t instanceof Uint8Array?this.write(21,t,i):t&&typeof t=="object"?this.write(143,t,i):(this.writeKey(i),this.writeValue(String(t)));else if(r.isListSchema()){if(Array.isArray(t))if(t.length===0)this.settings.serializeEmptyLists&&(this.writeKey(i),this.writeValue(""));else{const o=r.getValueSchema(),a=this.settings.flattenLists||r.getMergedTraits().xmlFlattened;let n=1;for(const c of t){if(c==null)continue;const u=o.getMergedTraits(),d=this.getKey("member",u.xmlName,u.ec2QueryName),h=a?`${i}${n}`:`${i}${d}.${n}`;this.write(o,c,h),++n}}}else if(r.isMapSchema()){if(t&&typeof t=="object"){const o=r.getKeySchema(),a=r.getValueSchema(),n=r.getMergedTraits().xmlFlattened;let c=1;for(const[u,d]of Object.entries(t)){if(d==null)continue;const h=o.getMergedTraits(),w=this.getKey("key",h.xmlName,h.ec2QueryName),P=n?`${i}${c}.${w}`:`${i}entry.${c}.${w}`,R=a.getMergedTraits(),A=this.getKey("value",R.xmlName,R.ec2QueryName),O=n?`${i}${c}.${A}`:`${i}entry.${c}.${A}`;this.write(o,u,P),this.write(a,d,O),++c}}}else if(r.isStructSchema()){if(t&&typeof t=="object"){let o=!1;for(const[a,n]of r.structIterator()){if(t[a]==null&&!n.isIdempotencyToken())continue;const c=n.getMergedTraits(),u=this.getKey(a,c.xmlName,c.ec2QueryName,"struct"),d=`${i}${u}`;this.write(n,t[a],d),o=!0}if(!o&&r.isUnionSchema()){const{$unknown:a}=t;if(Array.isArray(a)){const[n,c]=a,u=`${i}${n}`;this.write(15,c,u)}}}}else if(!r.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${r.getName(!0)}`)}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");const e=this.buffer;return delete this.buffer,e}getKey(e,t,i,r){const{ec2:o,capitalizeKeys:a}=this.settings;if(o&&i)return i;const n=t??e;return a&&r==="struct"?n[0].toUpperCase()+n.slice(1):n}writeKey(e){e.endsWith(".")&&(e=e.slice(0,e.length-1)),this.buffer+=`&${Z(e)}=`}writeValue(e){this.buffer+=Z(e)}}class Kt extends He{options;serializer;deserializer;mixin=new Ke;constructor(e){super({defaultNamespace:e.defaultNamespace}),this.options=e;const t={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:e.xmlNamespace,serviceNamespace:e.defaultNamespace,serializeEmptyLists:!0};this.serializer=new Ht(t),this.deserializer=new Lt(t)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(e){this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(e,t,i){const r=await super.serializeRequest(e,t,i);r.path.endsWith("/")||(r.path+="/"),Object.assign(r.headers,{"content-type":"application/x-www-form-urlencoded"}),(je(e.input)==="unit"||!r.body)&&(r.body="");const o=e.name.split("#")[1]??e.name;return r.body=`Action=${o}&Version=${this.options.version}`+r.body,r.body.endsWith("&")&&(r.body=r.body.slice(-1)),r}async deserializeResponse(e,t,i){const r=this.deserializer,o=M.of(e.output),a={};if(i.statusCode>=300){const h=await J(i.body,t);h.byteLength>0&&Object.assign(a,await r.read(15,h)),await this.handleError(e,t,i,a,this.deserializeMetadata(i))}for(const h in i.headers){const w=i.headers[h];delete i.headers[h],i.headers[h.toLowerCase()]=w}const n=e.name.split("#")[1]??e.name,c=o.isStructSchema()&&this.useNestedResult()?n+"Result":void 0,u=await J(i.body,t);return u.byteLength>0&&Object.assign(a,await r.read(o,u,c)),{$metadata:this.deserializeMetadata(i),...a}}useNestedResult(){return!0}async handleError(e,t,i,r,o){const a=this.loadQueryErrorCode(i,r)??"Unknown",n=this.loadQueryError(r),c=this.loadQueryErrorMessage(r);n.message=c,n.Error={Type:n.Type,Code:n.Code,Message:c};const{errorSchema:u,errorMetadata:d}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,i,n,o,this.mixin.findQueryCompatibleError),h=M.of(u),w=L.for(u[1]).getErrorCtor(u)??Error,P=new w(c),R={Type:n.Error.Type,Code:n.Error.Code,Error:n.Error};for(const[A,O]of h.structIterator()){const X=O.getMergedTraits().xmlName??A,Ue=n[X]??r[X];R[A]=this.deserializer.readSchema(O,Ue)}throw this.mixin.decorateServiceException(Object.assign(P,d,{$fault:h.getMergedTraits().error,message:c},R),r)}loadQueryErrorCode(e,t){const i=(t.Errors?.[0]?.Error??t.Errors?.Error??t.Error)?.Code;if(i!==void 0)return i;if(e.statusCode==404)return"NotFound"}loadQueryError(e){return e.Errors?.[0]?.Error??e.Errors?.Error??e.Error}loadQueryErrorMessage(e){const t=this.loadQueryError(e);return t?.message??t?.Message??e.message??e.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}function jt(){return async()=>"us-east-1"}const Vt=async(s,e,t)=>({operation:Be(e).operation,region:await ge(s.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function Bt(s){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:s.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}function Gt(s){return{schemeId:"smithy.api#noAuth"}}const Qt=s=>{const e=[];return s.operation==="AssumeRoleWithWebIdentity"?e.push(Gt()):e.push(Bt(s)),e},qt=s=>Object.assign(s,{stsClientCtor:$e}),Xt=s=>{const e=qt(s),t=Ve(e);return Object.assign(t,{authSchemePreference:ge(s.authSchemePreference??[])})},Zt=s=>Object.assign(s,{useDualstackEndpoint:s.useDualstackEndpoint??!1,useFipsEndpoint:s.useFipsEndpoint??!1,useGlobalEndpoint:s.useGlobalEndpoint??!1,defaultSigningName:"sts"}),Jt={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},Yt="3.993.0",es={version:Yt},ye=(s,e=!1)=>{if(e){for(const t of s.split("."))if(!ye(t))return!1;return!0}return!(!Ge(s)||s.length<3||s.length>63||s!==s.toLowerCase()||Qe(s))},ee=":",ts="/",ss=s=>{const e=s.split(ee);if(e.length<6)return null;const[t,i,r,o,a,...n]=e;if(t!=="arn"||i===""||r===""||n.join(ee)==="")return null;const c=n.map(u=>u.split(ts)).flat();return{partition:i,service:r,region:o,accountId:a,resourceId:c}},is=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"AWS European Sovereign Cloud (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],rs={partitions:is};let os=rs;const ns=s=>{const{partitions:e}=os;for(const i of e){const{regions:r,outputs:o}=i;for(const[a,n]of Object.entries(r))if(a===s)return{...o,...n}}for(const i of e){const{regionRegex:r,outputs:o}=i;if(new RegExp(r).test(s))return{...o}}const t=e.find(i=>i.id==="aws");if(!t)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...t.outputs}},Ee={isVirtualHostableS3Bucket:ye,parseArn:ss,partition:ns};fe.aws=Ee;const we="required",l="type",p="fn",m="argv",T="ref",te=!1,F=!0,C="booleanEquals",f="stringEquals",Pe="sigv4",be="sts",Ae="us-east-1",g="endpoint",se="https://sts.{Region}.{PartitionResult#dnsSuffix}",x="tree",U="error",H="getAttr",ie={[we]:!1,[l]:"string"},z={[we]:!0,default:!1,[l]:"boolean"},xe={[T]:"Endpoint"},re={[p]:"isSet",[m]:[{[T]:"Region"}]},S={[T]:"Region"},oe={[p]:"aws.partition",[m]:[S],assign:"PartitionResult"},Ie={[T]:"UseFIPS"},Re={[T]:"UseDualStack"},E={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:Pe,signingName:be,signingRegion:Ae}]},headers:{}},b={},ne={conditions:[{[p]:f,[m]:[S,"aws-global"]}],[g]:E,[l]:g},Ce={[p]:C,[m]:[Ie,!0]},Te={[p]:C,[m]:[Re,!0]},ae={[p]:H,[m]:[{[T]:"PartitionResult"},"supportsFIPS"]},De={[T]:"PartitionResult"},ce={[p]:C,[m]:[!0,{[p]:H,[m]:[De,"supportsDualStack"]}]},ue=[{[p]:"isSet",[m]:[xe]}],le=[Ce],de=[Te],as={parameters:{Region:ie,UseDualStack:z,UseFIPS:z,Endpoint:ie,UseGlobalEndpoint:z},rules:[{conditions:[{[p]:C,[m]:[{[T]:"UseGlobalEndpoint"},F]},{[p]:"not",[m]:ue},re,oe,{[p]:C,[m]:[Ie,te]},{[p]:C,[m]:[Re,te]}],rules:[{conditions:[{[p]:f,[m]:[S,"ap-northeast-1"]}],endpoint:E,[l]:g},{conditions:[{[p]:f,[m]:[S,"ap-south-1"]}],endpoint:E,[l]:g},{conditions:[{[p]:f,[m]:[S,"ap-southeast-1"]}],endpoint:E,[l]:g},{conditions:[{[p]:f,[m]:[S,"ap-southeast-2"]}],endpoint:E,[l]:g},ne,{conditions:[{[p]:f,[m]:[S,"ca-central-1"]}],endpoint:E,[l]:g},{conditions:[{[p]:f,[m]:[S,"eu-central-1"]}],endpoint:E,[l]:g},{conditions:[{[p]:f,[m]:[S,"eu-north-1"]}],endpoint:E,[l]:g},{conditions:[{[p]:f,[m]:[S,"eu-west-1"]}],endpoint:E,[l]:g},{conditions:[{[p]:f,[m]:[S,"eu-west-2"]}],endpoint:E,[l]:g},{conditions:[{[p]:f,[m]:[S,"eu-west-3"]}],endpoint:E,[l]:g},{conditions:[{[p]:f,[m]:[S,"sa-east-1"]}],endpoint:E,[l]:g},{conditions:[{[p]:f,[m]:[S,Ae]}],endpoint:E,[l]:g},{conditions:[{[p]:f,[m]:[S,"us-east-2"]}],endpoint:E,[l]:g},{conditions:[{[p]:f,[m]:[S,"us-west-1"]}],endpoint:E,[l]:g},{conditions:[{[p]:f,[m]:[S,"us-west-2"]}],endpoint:E,[l]:g},{endpoint:{url:se,properties:{authSchemes:[{name:Pe,signingName:be,signingRegion:"{Region}"}]},headers:b},[l]:g}],[l]:x},{conditions:ue,rules:[{conditions:le,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[l]:U},{conditions:de,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[l]:U},{endpoint:{url:xe,properties:b,headers:b},[l]:g}],[l]:x},{conditions:[re],rules:[{conditions:[oe],rules:[{conditions:[Ce,Te],rules:[{conditions:[{[p]:C,[m]:[F,ae]},ce],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:b,headers:b},[l]:g}],[l]:x},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[l]:U}],[l]:x},{conditions:le,rules:[{conditions:[{[p]:C,[m]:[ae,F]}],rules:[{conditions:[{[p]:f,[m]:[{[p]:H,[m]:[De,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:b,headers:b},[l]:g},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:b,headers:b},[l]:g}],[l]:x},{error:"FIPS is enabled but this partition does not support FIPS",[l]:U}],[l]:x},{conditions:de,rules:[{conditions:[ce],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:b,headers:b},[l]:g}],[l]:x},{error:"DualStack is enabled but this partition does not support DualStack",[l]:U}],[l]:x},ne,{endpoint:{url:se,properties:b,headers:b},[l]:g}],[l]:x}],[l]:x},{error:"Invalid Configuration: Missing Region",[l]:U}]},cs=as,us=new qe({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),ls=(s,e={})=>us.get(s,()=>Xe(cs,{endpointParams:s,logger:e.logger}));fe.aws=Ee;class I extends Ze{constructor(e){super(e),Object.setPrototypeOf(this,I.prototype)}}class K extends I{name="ExpiredTokenException";$fault="client";constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,K.prototype)}}class j extends I{name="MalformedPolicyDocumentException";$fault="client";constructor(e){super({name:"MalformedPolicyDocumentException",$fault:"client",...e}),Object.setPrototypeOf(this,j.prototype)}}class V extends I{name="PackedPolicyTooLargeException";$fault="client";constructor(e){super({name:"PackedPolicyTooLargeException",$fault:"client",...e}),Object.setPrototypeOf(this,V.prototype)}}class B extends I{name="RegionDisabledException";$fault="client";constructor(e){super({name:"RegionDisabledException",$fault:"client",...e}),Object.setPrototypeOf(this,B.prototype)}}class G extends I{name="IDPRejectedClaimException";$fault="client";constructor(e){super({name:"IDPRejectedClaimException",$fault:"client",...e}),Object.setPrototypeOf(this,G.prototype)}}class Q extends I{name="InvalidIdentityTokenException";$fault="client";constructor(e){super({name:"InvalidIdentityTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,Q.prototype)}}class q extends I{name="IDPCommunicationErrorException";$fault="client";constructor(e){super({name:"IDPCommunicationErrorException",$fault:"client",...e}),Object.setPrototypeOf(this,q.prototype)}}const ds="Arn",ps="AccessKeyId",ms="AssumedRoleId",ke="AssumedRoleUser",hs="AssumeRoleWithWebIdentity",gs="AssumeRoleWithWebIdentityRequest",fs="AssumeRoleWithWebIdentityResponse",Ss="Audience",ve="Credentials",ys="DurationSeconds",Es="Expiration",ws="ExpiredTokenException",Ps="IDPCommunicationErrorException",bs="IDPRejectedClaimException",As="InvalidIdentityTokenException",xs="MalformedPolicyDocumentException",Is="Policy",Rs="PolicyArns",Cs="PolicyDescriptorType",Ts="ProviderId",Ds="PackedPolicySize",ks="PackedPolicyTooLargeException",vs="Provider",_s="RoleArn",Ns="RegionDisabledException",$s="RoleSessionName",Us="SecretAccessKey",Ms="SubjectFromWebIdentityToken",Os="SourceIdentity",Ws="SessionToken",Fs="WebIdentityToken",zs="arn",Ls="accessKeySecretType",k="awsQueryError",v="client",Hs="clientTokenType",_="error",N="httpError",$="message",Ks="policyDescriptorListType",_e="smithy.ts.sdk.synthetic.com.amazonaws.sts",y="com.amazonaws.sts",Ne=L.for(_e);var js=[-3,_e,"STSServiceException",0,[],[]];Ne.registerError(js,I);const D=L.for(y);var Vs=[-3,y,ws,{[k]:["ExpiredTokenException",400],[_]:v,[N]:400},[$],[0]];D.registerError(Vs,K);var Bs=[-3,y,Ps,{[k]:["IDPCommunicationError",400],[_]:v,[N]:400},[$],[0]];D.registerError(Bs,q);var Gs=[-3,y,bs,{[k]:["IDPRejectedClaim",403],[_]:v,[N]:403},[$],[0]];D.registerError(Gs,G);var Qs=[-3,y,As,{[k]:["InvalidIdentityToken",400],[_]:v,[N]:400},[$],[0]];D.registerError(Qs,Q);var qs=[-3,y,xs,{[k]:["MalformedPolicyDocument",400],[_]:v,[N]:400},[$],[0]];D.registerError(qs,j);var Xs=[-3,y,ks,{[k]:["PackedPolicyTooLarge",400],[_]:v,[N]:400},[$],[0]];D.registerError(Xs,V);var Zs=[-3,y,Ns,{[k]:["RegionDisabledException",403],[_]:v,[N]:403},[$],[0]];D.registerError(Zs,B);const Js=[Ne,D];var Ys=[0,y,Ls,8,0],ei=[0,y,Hs,8,0],ti=[3,y,ke,0,[ms,ds],[0,0],2],si=[3,y,gs,0,[_s,$s,Fs,Ts,Rs,Is,ys],[0,0,[()=>ei,0],0,()=>ni,0,1],3],ii=[3,y,fs,0,[ve,Ms,ke,Ds,vs,Ss,Os],[[()=>ri,0],0,()=>ti,1,0,0,0]],ri=[3,y,ve,0,[ps,Us,Ws,Es],[0,[()=>Ys,0],0,4],4],oi=[3,y,Cs,0,[zs],[0]],ni=[1,y,Ks,0,()=>oi],ai=[9,y,hs,0,()=>si,()=>ii];const ci=s=>({apiVersion:"2011-06-15",base64Decoder:s?.base64Decoder??st,base64Encoder:s?.base64Encoder??he,disableHostPrefix:s?.disableHostPrefix??!1,endpointProvider:s?.endpointProvider??ls,extensions:s?.extensions??[],httpAuthSchemeProvider:s?.httpAuthSchemeProvider??Qt,httpAuthSchemes:s?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new tt},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Ft}],logger:s?.logger??new et,protocol:s?.protocol??Kt,protocolSettings:s?.protocolSettings??{defaultNamespace:"com.amazonaws.sts",errorTypeRegistries:Js,xmlNamespace:"https://sts.amazonaws.com/doc/2011-06-15/",version:"2011-06-15",serviceTarget:"AWSSecurityTokenServiceV20110615"},serviceId:s?.serviceId??"STS",urlParser:s?.urlParser??Ye,utf8Decoder:s?.utf8Decoder??Je,utf8Encoder:s?.utf8Encoder??me}),ui=s=>{const e=it(s),t=()=>e().then(ht),i=ci(s);return{...i,...s,runtime:"browser",defaultsMode:e,bodyLengthChecker:s?.bodyLengthChecker??dt,credentialDefaultProvider:s?.credentialDefaultProvider??(r=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:s?.defaultUserAgentProvider??lt({serviceId:i.serviceId,clientVersion:es.version}),maxAttempts:s?.maxAttempts??ut,region:s?.region??ct("Region is missing"),requestHandler:at.create(s?.requestHandler??t),retryMode:s?.retryMode??(async()=>(await t()).retryMode||nt),sha256:s?.sha256??ot,streamCollector:s?.streamCollector??rt,useDualstackEndpoint:s?.useDualstackEndpoint??(()=>Promise.resolve(mt)),useFipsEndpoint:s?.useFipsEndpoint??(()=>Promise.resolve(pt))}},li=s=>{const e=s.httpAuthSchemes;let t=s.httpAuthSchemeProvider,i=s.credentials;return{setHttpAuthScheme(r){const o=e.findIndex(a=>a.schemeId===r.schemeId);o===-1?e.push(r):e.splice(o,1,r)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(r){t=r},httpAuthSchemeProvider(){return t},setCredentials(r){i=r},credentials(){return i}}},di=s=>({httpAuthSchemes:s.httpAuthSchemes(),httpAuthSchemeProvider:s.httpAuthSchemeProvider(),credentials:s.credentials()}),pi=(s,e)=>{const t=Object.assign(gt(s),ft(s),St(s),li(s));return e.forEach(i=>i.configure(t)),Object.assign(s,yt(t),Et(t),wt(t),di(t))};class $e extends Pt{config;constructor(...[e]){const t=ui(e||{});super(t),this.initConfig=t;const i=Zt(t),r=bt(i),o=At(r),a=xt(o),n=Rt(a),c=It(n),u=Xt(c),d=pi(u,e?.extensions||[]);this.config=d,this.middlewareStack.use(Ct(this.config)),this.middlewareStack.use(Tt(this.config)),this.middlewareStack.use(Dt(this.config)),this.middlewareStack.use(kt(this.config)),this.middlewareStack.use(vt(this.config)),this.middlewareStack.use(_t(this.config)),this.middlewareStack.use(Nt(this.config)),this.middlewareStack.use($t(this.config,{httpAuthSchemeParametersProvider:Vt,identityProviderConfigProvider:async h=>new Ut({"aws.auth#sigv4":h.credentials})})),this.middlewareStack.use(Mt(this.config))}destroy(){super.destroy()}}class mi extends Ot.classBuilder().ep(Jt).m(function(e,t,i,r){return[Wt(i,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").sc(ai).build(){}const hi=s=>{if(typeof s?.Arn=="string"){const e=s.Arn.split(":");if(e.length>4&&e[4]!=="")return e[4]}},gi=async(s,e,t,i={})=>{const r=typeof s=="function"?await s():s,o=typeof e=="function"?await e():e;let a="";const n=r??o??(a=await jt()());return t?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${r} (credential provider clientConfig)`,`${o} (contextual client)`,`${a} (STS default: AWS_REGION, profile region, or us-east-1)`),n},fi=(s,e)=>{let t;return async i=>{if(!t){const{logger:c=s?.parentClientConfig?.logger,profile:u=s?.parentClientConfig?.profile,region:d,requestHandler:h=s?.parentClientConfig?.requestHandler,credentialProviderLogger:w,userAgentAppId:P=s?.parentClientConfig?.userAgentAppId}=s,R=await gi(d,s?.parentClientConfig?.region,w,{}),A=!Si(h);t=new e({...s,userAgentAppId:P,profile:u,region:R,requestHandler:A?h:void 0,logger:c})}const{Credentials:r,AssumedRoleUser:o}=await t.send(new mi(i));if(!r||!r.AccessKeyId||!r.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${i.RoleArn}`);const a=hi(o),n={accessKeyId:r.AccessKeyId,secretAccessKey:r.SecretAccessKey,sessionToken:r.SessionToken,expiration:r.Expiration,...r.CredentialScope&&{credentialScope:r.CredentialScope},...a&&{accountId:a}};return a&&Y(n,"RESOLVED_ACCOUNT_ID","T"),Y(n,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),n}},Si=s=>s?.metadata?.handlerProtocol==="h2",yi=(s,e)=>e?class extends s{constructor(i){super(i);for(const r of e)this.middlewareStack.use(r)}}:s,Pi=(s={},e)=>fi(s,yi($e,e));export{Ot as $Command,ai as AssumeRoleWithWebIdentity$,mi as AssumeRoleWithWebIdentityCommand,si as AssumeRoleWithWebIdentityRequest$,ii as AssumeRoleWithWebIdentityResponse$,ti as AssumedRoleUser$,ri as Credentials$,K as ExpiredTokenException,Vs as ExpiredTokenException$,q as IDPCommunicationErrorException,Bs as IDPCommunicationErrorException$,G as IDPRejectedClaimException,Gs as IDPRejectedClaimException$,Q as InvalidIdentityTokenException,Qs as InvalidIdentityTokenException$,j as MalformedPolicyDocumentException,qs as MalformedPolicyDocumentException$,V as PackedPolicyTooLargeException,Xs as PackedPolicyTooLargeException$,oi as PolicyDescriptorType$,B as RegionDisabledException,Zs as RegionDisabledException$,$e as STSClient,I as STSServiceException,js as STSServiceException$,Pt as __Client,Js as errorTypeRegistries,Pi as getDefaultRoleAssumerWithWebIdentity};
